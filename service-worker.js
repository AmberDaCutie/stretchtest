/* timestretch-player 0.0.0 http://29a.ch/timestretch/ */
"use strict";function deleteAllCaches(){return caches.keys().then(function(a){return Promise.all(a.map(function(a){return caches.delete(a)}))})}!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.toolbox=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b){b=b||{};var c=b.debug||p.debug;c&&console.log("[sw-toolbox] "+a)}function e(a){var b;return a&&a.cache&&(b=a.cache.name),b=b||p.cache.name,caches.open(b)}function f(a,b){b=b||{};var c=b.successResponses||p.successResponses;return fetch(a.clone()).then(function(d){return"GET"===a.method&&c.test(d.status)&&e(b).then(function(c){c.put(a,d).then(function(){var d=b.cache||p.cache;(d.maxEntries||d.maxAgeSeconds)&&d.name&&g(a,c,d)})}),d.clone()})}function g(a,b,c){var d=h.bind(null,a,b,c);o=o?o.then(d):d()}function h(a,b,c){var e=a.url,f=c.maxAgeSeconds,g=c.maxEntries,h=c.name,i=Date.now();return d("Updating LRU order for "+e+". Max entries is "+g+", max age is "+f),q.getDb(h).then(function(a){return q.setTimestampForUrl(a,e,i)}).then(function(a){return q.expireEntries(a,g,f,i)}).then(function(a){d("Successfully updated IDB.");var c=a.map(function(a){return b.delete(a)});return Promise.all(c).then(function(){d("Done with cache cleanup.")})}).catch(function(a){d(a)})}function i(a,b,c){return d("Renaming cache: ["+a+"] to ["+b+"]",c),caches.delete(b).then(function(){return Promise.all([caches.open(a),caches.open(b)]).then(function(b){var c=b[0],d=b[1];return c.keys().then(function(a){return Promise.all(a.map(function(a){return c.match(a).then(function(b){return d.put(a,b)})}))}).then(function(){return caches.delete(a)})})})}function j(a,b){return e(b).then(function(b){return b.add(a)})}function k(a,b){return e(b).then(function(b){return b.delete(a)})}function l(a){a instanceof Promise||m(a),p.preCacheItems=p.preCacheItems.concat(a)}function m(a){var b=Array.isArray(a);if(b&&a.forEach(function(a){"string"==typeof a||a instanceof Request||(b=!1)}),!b)throw new TypeError("The precache method expects either an array of strings and/or Requests or a Promise that resolves to an array of strings and/or Requests.");return a}function n(a,b,c){if(!a)return!1;if(b){var d=a.headers.get("date");if(d){var e=new Date(d);if(e.getTime()+1e3*b<c)return!1}}return!0}var o,p=a("./options"),q=a("./idb-cache-expiration");b.exports={debug:d,fetchAndCache:f,openCache:e,renameCache:i,cache:j,uncache:k,precache:l,validatePrecacheInput:m,isResponseFresh:n}},{"./idb-cache-expiration":2,"./options":4}],2:[function(a,b,c){function d(a){return new Promise(function(b,c){var d=indexedDB.open(j+a,k);d.onupgradeneeded=function(){var a=d.result.createObjectStore(l,{keyPath:m});a.createIndex(n,n,{unique:!1})},d.onsuccess=function(){b(d.result)},d.onerror=function(){c(d.error)}})}function e(a){return a in o||(o[a]=d(a)),o[a]}function f(a,b,c){return new Promise(function(d,e){var f=a.transaction(l,"readwrite"),g=f.objectStore(l);g.put({url:b,timestamp:c}),f.oncomplete=function(){d(a)},f.onabort=function(){e(f.error)}})}function g(a,b,c){return b?new Promise(function(d,e){var f=1e3*b,g=[],h=a.transaction(l,"readwrite"),i=h.objectStore(l),j=i.index(n);j.openCursor().onsuccess=function(a){var b=a.target.result;if(b&&c-f>b.value[n]){var d=b.value[m];g.push(d),i.delete(d),b.continue()}},h.oncomplete=function(){d(g)},h.onabort=e}):Promise.resolve([])}function h(a,b){return b?new Promise(function(c,d){var e=[],f=a.transaction(l,"readwrite"),g=f.objectStore(l),h=g.index(n),i=h.count();h.count().onsuccess=function(){var a=i.result;a>b&&(h.openCursor().onsuccess=function(c){var d=c.target.result;if(d){var f=d.value[m];e.push(f),g.delete(f),a-e.length>b&&d.continue()}})},f.oncomplete=function(){c(e)},f.onabort=d}):Promise.resolve([])}function i(a,b,c,d){return g(a,c,d).then(function(c){return h(a,b).then(function(a){return c.concat(a)})})}var j="sw-toolbox-",k=1,l="store",m="url",n="timestamp",o={};b.exports={getDb:e,setTimestampForUrl:f,expireEntries:i}},{}],3:[function(a,b,c){function d(a){var b=i.match(a.request);b?a.respondWith(b(a.request)):i.default&&"GET"===a.request.method&&0===a.request.url.indexOf("http")&&a.respondWith(i.default(a.request))}function e(a){h.debug("activate event fired");var b=j.cache.name+"$$$inactive$$$";a.waitUntil(h.renameCache(b,j.cache.name))}function f(a){return a.reduce(function(a,b){return a.concat(b)},[])}function g(a){var b=j.cache.name+"$$$inactive$$$";h.debug("install event fired"),h.debug("creating cache ["+b+"]"),a.waitUntil(h.openCache({cache:{name:b}}).then(function(a){return Promise.all(j.preCacheItems).then(f).then(h.validatePrecacheInput).then(function(b){return h.debug("preCache list: "+(b.join(", ")||"(none)")),a.addAll(b)})}))}a("serviceworker-cache-polyfill");var h=a("./helpers"),i=a("./router"),j=a("./options");b.exports={fetchListener:d,activateListener:e,installListener:g}},{"./helpers":1,"./options":4,"./router":6,"serviceworker-cache-polyfill":16}],4:[function(a,b,c){var d;d=self.registration?self.registration.scope:self.scope||new URL("./",self.location).href,b.exports={cache:{name:"$$$toolbox-cache$$$"+d+"$$$",maxAgeSeconds:null,maxEntries:null},debug:!1,networkTimeoutSeconds:null,preCacheItems:[],successResponses:/^0|([123]\d\d)|(40[14567])|410$/}},{}],5:[function(a,b,c){var d=new URL("./",self.location),e=d.pathname,f=a("path-to-regexp"),g=function(a,b,c,d){b instanceof RegExp?this.fullUrlRegExp=b:(0!==b.indexOf("/")&&(b=e+b),this.keys=[],this.regexp=f(b,this.keys)),this.method=a,this.options=d,this.handler=c};g.prototype.makeHandler=function(a){var b;if(this.regexp){var c=this.regexp.exec(a);b={},this.keys.forEach(function(a,d){b[a.name]=c[d+1]})}return function(a){return this.handler(a,b,this.options)}.bind(this)},b.exports=g},{"path-to-regexp":15}],6:[function(a,b,c){function d(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var e=a("./route"),f=a("./helpers"),g=function(a,b){for(var c=a.entries(),d=c.next(),e=[];!d.done;){var f=new RegExp(d.value[0]);f.test(b)&&e.push(d.value[1]),d=c.next()}return e},h=function(){this.routes=new Map,this.routes.set(RegExp,new Map),this.default=null};["get","post","put","delete","head","any"].forEach(function(a){h.prototype[a]=function(b,c,d){return this.add(a,b,c,d)}}),h.prototype.add=function(a,b,c,g){g=g||{};var h;b instanceof RegExp?h=RegExp:(h=g.origin||self.location.origin,h=h instanceof RegExp?h.source:d(h)),a=a.toLowerCase();var i=new e(a,b,c,g);this.routes.has(h)||this.routes.set(h,new Map);var j=this.routes.get(h);j.has(a)||j.set(a,new Map);var k=j.get(a),l=i.regexp||i.fullUrlRegExp;k.has(l.source)&&f.debug('"'+b+'" resolves to same regex as existing route.'),k.set(l.source,i)},h.prototype.matchMethod=function(a,b){var c=new URL(b),d=c.origin,e=c.pathname;return this._match(a,g(this.routes,d),e)||this._match(a,[this.routes.get(RegExp)],b)},h.prototype._match=function(a,b,c){if(0===b.length)return null;for(var d=0;d<b.length;d++){var e=b[d],f=e&&e.get(a.toLowerCase());if(f){var h=g(f,c);if(h.length>0)return h[0].makeHandler(c)}}return null},h.prototype.match=function(a){return this.matchMethod(a.method,a.url)||this.matchMethod("any",a.url)},b.exports=new h},{"./helpers":1,"./route":5}],7:[function(a,b,c){function d(a,b,c){return c=c||{},f.debug("Strategy: cache first ["+a.url+"]",c),f.openCache(c).then(function(b){return b.match(a).then(function(b){var d=c.cache||e.cache,g=Date.now();return f.isResponseFresh(b,d.maxAgeSeconds,g)?b:f.fetchAndCache(a,c)})})}var e=a("../options"),f=a("../helpers");b.exports=d},{"../helpers":1,"../options":4}],8:[function(a,b,c){function d(a,b,c){return c=c||{},f.debug("Strategy: cache only ["+a.url+"]",c),f.openCache(c).then(function(b){return b.match(a).then(function(a){var b=c.cache||e.cache,d=Date.now();if(f.isResponseFresh(a,b.maxAgeSeconds,d))return a})})}var e=a("../options"),f=a("../helpers");b.exports=d},{"../helpers":1,"../options":4}],9:[function(a,b,c){function d(a,b,c){return e.debug("Strategy: fastest ["+a.url+"]",c),new Promise(function(d,g){var h=!1,i=[],j=function(a){i.push(a.toString()),h?g(new Error('Both cache and network failed: "'+i.join('", "')+'"')):h=!0},k=function(a){a instanceof Response?d(a):j("No result returned")};e.fetchAndCache(a.clone(),c).then(k,j),f(a,b,c).then(k,j)})}var e=a("../helpers"),f=a("./cacheOnly");b.exports=d},{"../helpers":1,"./cacheOnly":8}],10:[function(a,b,c){b.exports={networkOnly:a("./networkOnly"),networkFirst:a("./networkFirst"),cacheOnly:a("./cacheOnly"),cacheFirst:a("./cacheFirst"),fastest:a("./fastest")}},{"./cacheFirst":7,"./cacheOnly":8,"./fastest":9,"./networkFirst":11,"./networkOnly":12}],11:[function(a,b,c){function d(a,b,c){c=c||{};var d=c.successResponses||e.successResponses,g=c.networkTimeoutSeconds||e.networkTimeoutSeconds;return f.debug("Strategy: network first ["+a.url+"]",c),f.openCache(c).then(function(b){var h,i,j=[];if(g){var k=new Promise(function(d){h=setTimeout(function(){b.match(a).then(function(a){var b=c.cache||e.cache,g=Date.now(),h=b.maxAgeSeconds;f.isResponseFresh(a,h,g)&&d(a)})},1e3*g)});j.push(k)}var l=f.fetchAndCache(a,c).then(function(a){if(h&&clearTimeout(h),d.test(a.status))return a;throw f.debug("Response was an HTTP error: "+a.statusText,c),i=a,new Error("Bad response")}).catch(function(d){return f.debug("Network or response error, fallback to cache ["+a.url+"]",c),b.match(a).then(function(a){if(a)return a;if(i)return i;throw d})});return j.push(l),Promise.race(j)})}var e=a("../options"),f=a("../helpers");b.exports=d},{"../helpers":1,"../options":4}],12:[function(a,b,c){function d(a,b,c){return e.debug("Strategy: network only ["+a.url+"]",c),fetch(a)}var e=a("../helpers");b.exports=d},{"../helpers":1}],13:[function(a,b,c){var d=a("./options"),e=a("./router"),f=a("./helpers"),g=a("./strategies"),h=a("./listeners");f.debug("Service Worker Toolbox is loading"),self.addEventListener("install",h.installListener),self.addEventListener("activate",h.activateListener),self.addEventListener("fetch",h.fetchListener),b.exports={networkOnly:g.networkOnly,networkFirst:g.networkFirst,cacheOnly:g.cacheOnly,cacheFirst:g.cacheFirst,fastest:g.fastest,router:e,options:d,cache:f.cache,uncache:f.uncache,precache:f.precache}},{"./helpers":1,"./listeners":3,"./options":4,"./router":6,"./strategies":10}],14:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],15:[function(a,b,c){function d(a,b){for(var c,d=[],e=0,f=0,g="",h=b&&b.delimiter||"/";null!=(c=s.exec(a));){var k=c[0],l=c[1],m=c.index;if(g+=a.slice(f,m),f=m+k.length,l)g+=l[1];else{var n=a[f],o=c[2],p=c[3],q=c[4],r=c[5],t=c[6],u=c[7];g&&(d.push(g),g="");var v=null!=o&&null!=n&&n!==o,w="+"===t||"*"===t,x="?"===t||"*"===t,y=c[2]||h,z=q||r;d.push({name:p||e++,prefix:o||"",delimiter:y,optional:x,repeat:w,partial:v,asterisk:!!u,pattern:z?j(z):u?".*":"[^"+i(y)+"]+?"})}}return f<a.length&&(g+=a.substr(f)),g&&d.push(g),d}function e(a,b){return h(d(a,b))}function f(a){return encodeURI(a).replace(/[\/?#]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function g(a){return encodeURI(a).replace(/[?#]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}function h(a){for(var b=new Array(a.length),c=0;c<a.length;c++)"object"==typeof a[c]&&(b[c]=new RegExp("^(?:"+a[c].pattern+")$"));return function(c,d){for(var e="",h=c||{},i=d||{},j=i.pretty?f:encodeURIComponent,k=0;k<a.length;k++){var l=a[k];if("string"!=typeof l){var m,n=h[l.name];if(null==n){if(l.optional){l.partial&&(e+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(n)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(n)+"`");if(0===n.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var o=0;o<n.length;o++){if(m=j(n[o]),!b[k].test(m))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(m)+"`");e+=(0===o?l.prefix:l.delimiter)+m}}else{if(m=l.asterisk?g(n):j(n),!b[k].test(m))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+m+'"');e+=l.prefix+m}}else e+=l}return e}}function i(a){return a.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function j(a){return a.replace(/([=!:$\/()])/g,"\\$1")}function k(a,b){return a.keys=b,a}function l(a){return a.sensitive?"":"i"}function m(a,b){var c=a.source.match(/\((?!\?)/g);if(c)for(var d=0;d<c.length;d++)b.push({name:d,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return k(a,b)}function n(a,b,c){for(var d=[],e=0;e<a.length;e++)d.push(q(a[e],b,c).source);var f=new RegExp("(?:"+d.join("|")+")",l(c));return k(f,b)}function o(a,b,c){return p(d(a,c),b,c)}function p(a,b,c){r(b)||(c=b||c,b=[]),c=c||{};for(var d=c.strict,e=c.end!==!1,f="",g=0;g<a.length;g++){var h=a[g];if("string"==typeof h)f+=i(h);else{var j=i(h.prefix),m="(?:"+h.pattern+")";b.push(h),h.repeat&&(m+="(?:"+j+m+")*"),m=h.optional?h.partial?j+"("+m+")?":"(?:"+j+"("+m+"))?":j+"("+m+")",f+=m}}var n=i(c.delimiter||"/"),o=f.slice(-n.length)===n;return d||(f=(o?f.slice(0,-n.length):f)+"(?:"+n+"(?=$))?"),f+=e?"$":d&&o?"":"(?="+n+"|$)",k(new RegExp("^"+f,l(c)),b)}function q(a,b,c){return r(b)||(c=b||c,b=[]),c=c||{},a instanceof RegExp?m(a,b):r(a)?n(a,b,c):o(a,b,c)}var r=a("isarray");b.exports=q,b.exports.parse=d,b.exports.compile=e,b.exports.tokensToFunction=h,b.exports.tokensToRegExp=p;var s=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},{isarray:14}],16:[function(a,b,c){!function(){var a=Cache.prototype.addAll,b=navigator.userAgent.match(/(Firefox|Chrome)\/(\d+\.)/);if(b)var c=b[1],d=parseInt(b[2]);a&&(!b||"Firefox"===c&&d>=46||"Chrome"===c&&d>=50)||(Cache.prototype.addAll=function(a){function b(a){this.name="NetworkError",this.code=19,this.message=a}var c=this;return b.prototype=Object.create(Error.prototype),Promise.resolve().then(function(){if(arguments.length<1)throw new TypeError;return a=a.map(function(a){return a instanceof Request?a:String(a)}),Promise.all(a.map(function(a){"string"==typeof a&&(a=new Request(a));var c=new URL(a.url).protocol;if("http:"!==c&&"https:"!==c)throw new b("Invalid scheme");return fetch(a.clone())}))}).then(function(d){if(d.some(function(a){return!a.ok}))throw new b("Incorrect response status");return Promise.all(d.map(function(b,d){return c.put(a[d],b)}))}).then(function(){})},Cache.prototype.add=function(a){return this.addAll([a])})}()},{}]},{},[13])(13)});var PrecacheConfig=[["./open-sans-v13-latin-300.cache-4a05b9c5ba6ee0a5.woff","0d0d7107450f05b72a4507d0d7687dd1"],["MaterialIcons-Regular.cache-cdec8962bbc84e37.woff","012cf6a10129e2275d79d6adac7f3b02"],["app.cache-03c09a0175f0ec0f.css","9caace4eee11f76238dc0eb6b0f8fa1c"],["app.cache-f1560ac89c33e5ff.js","19f4478375b49dc6dc426926f7c8a756"],["logo-128.cache-f198d4bc5c4aba53.png","2bc3618086a9d83197df2f27517341a5"],["logo-180.cache-916a40cd36c6292a.png","5509c514782094f477833f0175f74caa"],["logo-192.cache-8102950a6b4d3512.png","8a054b39944b5d05f8754165dcab8c24"],["logo-256.cache-c22973cece38b5cc.png","8644c886fa7fe031e6415a8928950df4"],["logo-32.cache-9ed84be3230357d6.png","e78a5383fe3493fc61daae85af90e0c7"],["logo-64.cache-71b9031093d6e153.png","4ced45449c6d421f3ab696eee1868e73"],["worker-lame.cache-46ac7417ab4ae41a.js","addfca253fec564859cd0d6b47e59b8f"],["worker.cache-a6ad289b5092967e.js","b394af7921a3d4db8ef1d8394c7e1fd9"]],CacheNamePrefix="sw-precache-v1-timestretch-player-"+(self.registration?self.registration.scope:"")+"-",IgnoreUrlParametersMatching=[/^utm_/],addDirectoryIndex=function(a,b){var c=new URL(a);return"/"===c.pathname.slice(-1)&&(c.pathname+=b),c.toString()},getCacheBustedUrl=function(a,b){b=b||Date.now();var c=new URL(a);return c.search+=(c.search?"&":"")+"sw-precache="+b,c.toString()},isPathWhitelisted=function(a,b){if(0===a.length)return!0;var c=new URL(b).pathname;return a.some(function(a){return c.match(a)})},populateCurrentCacheNames=function(a,b,c){var d={},e={};return a.forEach(function(a){var f=new URL(a[0],c).toString(),g=b+f+"-"+a[1];e[g]=f,d[f]=g}),{absoluteUrlToCacheName:d,currentCacheNamesToAbsoluteUrl:e}},stripIgnoredUrlParameters=function(a,b){var c=new URL(a);return c.search=c.search.slice(1).split("&").map(function(a){return a.split("=")}).filter(function(a){return b.every(function(b){return!b.test(a[0])})}).map(function(a){return a.join("=")}).join("&"),c.toString()},mappings=populateCurrentCacheNames(PrecacheConfig,CacheNamePrefix,self.location),AbsoluteUrlToCacheName=mappings.absoluteUrlToCacheName,CurrentCacheNamesToAbsoluteUrl=mappings.currentCacheNamesToAbsoluteUrl;self.addEventListener("install",function(a){a.waitUntil(Promise.all(Object.keys(CurrentCacheNamesToAbsoluteUrl).map(function(a){return caches.open(a).then(function(b){return b.keys().then(function(c){if(0===c.length){var d=a.split("-").pop(),e=getCacheBustedUrl(CurrentCacheNamesToAbsoluteUrl[a],d),f=new Request(e,{credentials:"same-origin"});return fetch(f).then(function(c){return c.ok?b.put(CurrentCacheNamesToAbsoluteUrl[a],c):(console.error("Request for %s returned a response status %d, so not attempting to cache it.",e,c.status),caches.delete(a))})}})})})).then(function(){return caches.keys().then(function(a){return Promise.all(a.filter(function(a){return 0===a.indexOf(CacheNamePrefix)&&!(a in CurrentCacheNamesToAbsoluteUrl)}).map(function(a){return caches.delete(a)}))})}).then(function(){"function"==typeof self.skipWaiting&&self.skipWaiting()}))}),self.clients&&"function"==typeof self.clients.claim&&self.addEventListener("activate",function(a){a.waitUntil(self.clients.claim())}),self.addEventListener("message",function(a){"delete_all"===a.data.command&&(console.log("About to delete all caches..."),deleteAllCaches().then(function(){console.log("Caches deleted."),a.ports[0].postMessage({error:null})}).catch(function(b){console.log("Caches not deleted:",b),a.ports[0].postMessage({error:b})}))}),self.addEventListener("fetch",function(a){if("GET"===a.request.method){var b=stripIgnoredUrlParameters(a.request.url,IgnoreUrlParametersMatching),c=AbsoluteUrlToCacheName[b],d="index.html";!c&&d&&(b=addDirectoryIndex(b,d),c=AbsoluteUrlToCacheName[b]);var e="";if(!c&&e&&a.request.headers.has("accept")&&a.request.headers.get("accept").includes("text/html")&&isPathWhitelisted([],a.request.url)){var f=new URL(e,self.location);c=AbsoluteUrlToCacheName[f.toString()]}c&&a.respondWith(caches.open(c).then(function(a){return a.keys().then(function(b){return a.match(b[0]).then(function(a){if(a)return a;throw Error("The cache "+c+" is empty.")})})}).catch(function(b){return console.warn('Couldn\'t serve response for "%s" from cache: %O',a.request.url,b),fetch(a.request)}))}}),toolbox.router.get("/(timestretch/)?",toolbox.networkFirst,{});